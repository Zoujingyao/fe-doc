---
group:
  title: 动态规划
  path: /algorithm/dp
---

# [494. 目标和](https://leetcode.cn/problems/target-sum/?favorite=2cktkvj)

## 思路

动态规划，和[416](../416_canPartition)一样经典完全背包问题，要多想题目能转化成什么熟悉的题目。

本题是选若干个元素为负数，假设选出的元素和为`neg`，假设`nums`中所有元素和为`sum`，那么剩余元素之和为`sum-neg`；将元素变为负数后，所有元素之和等于`target`，即`sum-neg-neg=target`，得到`neg = (sum-target) / 2`;

**转化后的题目**：能否从元素中取出若干个数，使得其重量恰好等于背包容量`(sum-target) / 2`；

- dp 数组定义

设`dp[i][j]`表示从`nums`的前`i`个数中即`nums[0: i+1]`中选择若干个元素（可以一个都不选），元素和为`j`的组合个数；然后 dp 数组的大小是`(sum-target) / 2`的;

- 初始化

从前 0 个元素中选择 0 个元素，元素和为 0，所以`dp[0][0] = 1`;

- 递推

对于当前新选择 `nums[i]`，只有选或者不选两种，是否能选还要满足下面的条件：

- 不选`nums[i]`: 靠前`i-1`个元素和为`j`的组合，那么`dp[i][j] = dp[i-1][j]`;
- 选`nums[i]`: 需要满足条件`j >= nums[i]`，则还可以通过选 nums[i]，并从前`i-1`个元素选择和为`j-nums[i]`，即`dp[i][j] += dp[i-1][j-nums[i]]`

- `j < nums[i]`: 那么只能不选择第`i`号元素，
- : 那么第`i`号元素可选可不选，选的话是, 不选的话是`dp[i-1][j]`，只要有一个为`true`，`dp[i][j]`就为`true`;

- 结果 `dp[n][(sum-target) / 2]`，即从`[0, n-1]`中选择若干个元素，使得其和恰好为`(sum-target) / 2`的组合数；

dp 定义和上一题不同，主要是因为如果初始化问题，如果和上一题一样所有`dp[i][0] = 1`，那如果有若干个元素为 0，就会计算错误，因为 dp[i][0]有误。

## 代码

<code src='./index.tsx'></code>
